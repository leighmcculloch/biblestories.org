<!doctype html>
%html{:lang=>I18n.locale, :prefix=>"og: http://ogp.me/ns#"}
  %head
    %meta{:content=>"IE=edge,chrome=1", :"http-equiv"=>"X-UA-Compatible"}

    - title = current_page.data.title || yield_content(:title)
    - description = current_page.data.description || yield_content(:description)
    - social_description = current_page.data.description || yield_content(:social_description) || description
    - url = current_page.data.url || settings.deployment.base_url(locale: I18n.locale)

    %title= title
    
    %meta{:name=>"description", :content=>description}

    - settings.deployments.each do |deployment|
      - deployment.locales.each do |locale|
        %link{:rel=>"alternate", :hreflang=>locale.to_s, :href=>"#{deployment.base_url(locale: locale)}#{current_page.url}"}

    %meta{:property=>"og:type", :content=>"website"}
    %meta{:property=>"og:url", :content=>url}
    %meta{:property=>"og:title", :content=>title}
    %meta{:property=>"og:description", :content=>social_description}
    
    %meta{:name=>"twitter:card", :content=>"summary"}
    %meta{:name=>"twitter:title", :content=>title}
    %meta{:name=>"twitter:description", :content=>social_description}

    %meta{:name=>"viewport", :content=>"width=device-width,initial-scale=1"}
    %meta{:name=>"apple-mobile-web-app-capable", :content=>"yes"}
    
    %link{:rel=>"shortcut icon", :href=>"/favicon.png"}
    %link{:rel=>"icon", :type=>"image/ico", :href=>"/favicon.ico"}
    
    %link{:rel=>"stylesheet", :type=>"text/css", :href=>"//fonts.googleapis.com/css?family=Open+Sans:300,600|Libre+Baskerville:400"}
    = stylesheet_link_tag "all.css"
    /[if lte IE 8]
      = stylesheet_link_tag "ie.css"
    = yield_content :head
    = javascript_include_tag("all.js", :async=>"async")
  %body.page{:class => "page #{page_classes} #{current_page.data.page_classes}"}
    .container= yield