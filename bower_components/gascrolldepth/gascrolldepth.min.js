/*!
 * @preserve
 * gascrolldepth.js | v0.8
 * Copyright (c) 2015 Rob Flaherty (@robflaherty), Leigh McCulloch (@___leigh___)
 * Licensed under the MIT and GPL licenses.
 */
!function(e,n,t){"use strict";function r(){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(arguments[0][n]=arguments[e][n]);return arguments[0]}function o(e,n){for(var t=0;t<e.length;t++)if(e[t]===n)return!0;return!1}function a(){return Math.max(n.documentElement.scrollHeight,n.body.scrollHeight,n.documentElement.offsetHeight,n.body.offsetHeight,n.documentElement.clientHeight)}function i(){return e.innerHeight||n.documentElement.clientHeight||n.body.clientHeight}function l(){return e.pageYOffset||("CSS1Compat"===n.compatMode?n.documentElement.scrollTop:n.body.scrollTop)}function c(e){return e.getBoundingClientRect().top+l()}function u(r){return"undefined"!=typeof e.jQuery?e.jQuery(r).get(0):"undefined"!=typeof n.querySelector?n.querySelector(r):"#"==r.charAt(0)?n.getElementById(r.substr(1)):t}function g(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent?e.attachEvent("on"+n,t):e["on"+n]=t}function s(e,n,t){e.removeEventListener?e.removeEventListener(n,t,!1):e.detachEvent?e.detachEvent("on"+n,t):e["on"+type]=null}var p,h,v,f,m={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,nonInteraction:!0,gaGlobal:!1,gtmOverride:!1},d=[],y=0,D=function(n){function t(n){f?f({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:n,eventLabel:"Baseline",eventValue:1,eventNonInteraction:!0}):(p&&e[v]("send","event","Scroll Depth",n,"Baseline",1,{nonInteraction:!0}),h&&_gaq.push(["_trackEvent","Scroll Depth",n,"Baseline",1,!0]))}function D(t,r,o,a){f?(f({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:t,eventLabel:r,eventValue:1,eventNonInteraction:n.nonInteraction}),n.pixelDepth&&arguments.length>2&&o>y&&(y=o,f({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:_(o),eventValue:1,eventNonInteraction:n.nonInteraction})),n.userTiming&&arguments.length>3&&f({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:t,eventLabel:r,eventTiming:a})):(p&&(e[v]("send","event","Scroll Depth",t,r,1,{nonInteraction:n.nonInteraction}),n.pixelDepth&&arguments.length>2&&o>y&&(y=o,e[v]("send","event","Scroll Depth","Pixel Depth",_(o),1,{nonInteraction:n.nonInteraction})),n.userTiming&&arguments.length>3&&e[v]("send","timing","Scroll Depth",t,a,r)),h&&(_gaq.push(["_trackEvent","Scroll Depth",t,r,1,n.nonInteraction]),n.pixelDepth&&arguments.length>2&&o>y&&(y=o,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",_(o),1,n.nonInteraction])),n.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",t,a,r,100])))}function S(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function E(e,n,t){for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];!o(d,r)&&n>=a&&(D("Percentage",r,n,t),d.push(r))}}function I(e,n,t){for(var r=0;r<e.length;r++){var a=e[r];if(!o(d,a)){var i="string"==typeof a?u(a):a;if(i){var l=c(i);n>=l&&(D("Elements",a,n,t),d.push(a))}}}}function _(e){return(250*Math.floor(e/250)).toString()}function T(e,n){var t,r,o,a=null,i=0,l=function(){i=new Date,a=null,o=e.apply(t,r)};return function(){var c=new Date;i||(i=c);var u=n-(c-i);return t=this,r=arguments,0>=u?(clearTimeout(a),a=null,i=c,o=e.apply(t,r)):a||(a=setTimeout(l,u)),o}}var b=+new Date;if(n=r({},m,n),!(a()<n.minHeight)){n.gaGlobal?(p=!0,v=n.gaGlobal):"function"==typeof ga?(p=!0,v="ga"):"function"==typeof __gaTracker&&(p=!0,v="__gaTracker"),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(h=!0),"function"==typeof n.eventHandler?f=n.eventHandler:"undefined"==typeof dataLayer||"function"!=typeof dataLayer.push||n.gtmOverride||(f=function(e){dataLayer.push(e)}),n.percentage?t("Percentage"):n.elements&&t("Elements");var H=T(function(){var t=a(),r=i(),o=l()+r,c=S(t),u=+new Date-b;return d.length>=4+n.elements.length?void s(e,"scroll",H):(n.elements&&I(n.elements,o,u),void(n.percentage&&E(c,o,u)))},500);g(e,"scroll",H)}};e.gascrolldepth={init:D},"undefined"!=typeof e.jQuery&&(e.jQuery.gascrolldepth=D)}(window,document);